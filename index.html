<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #0f0f23;
            color: #00ff00;
            line-height: 1.6;
        }
        .container {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #00ff00;
            border-radius: 5px;
            background: rgba(0, 255, 0, 0.05);
        }
        h1, h2 {
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 5px #00ff00;
        }
        textarea {
            width: 100%;
            height: 100px;
            background: #1c1c1c;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px;
            font-family: monospace;
            border-radius: 4px;
            resize: vertical;
        }
        input {
            width: 100%;
            background: #1c1c1c;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px;
            font-family: monospace;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 12px 24px;
            margin: 10px 5px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 4px;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
        }
        button:hover {
            background: #00cc00;
            box-shadow: 0 0 10px #00ff00;
        }
        .output {
            background: #1c1c1c;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #00ff00;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        .debug {
            background: #2a2a2a;
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #ff9900;
            border-radius: 3px;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .warning { color: #ff9900; }
        .info { color: #00ccff; }
        .flex-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .status {
            padding: 10px;
            text-align: center;
            font-weight: bold;
            border-radius: 4px;
            margin: 10px 0;
        }
        .valid {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
        }
        .invalid {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
        }
        .key-display {
            font-family: monospace;
            background: #1c1c1c;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border: 1px solid #444;
        }
        .hint {
            color: #ff9900;
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>üîê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞</h1>

    <div class="container">
        <h2>üìù –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
        <textarea id="inputText">–ü—Ä–∏–≤–µ—Ç –º–∏—Ä! –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.</textarea>
        
        <h2>üîë –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</h2>
        <input type="text" id="encryptionKey" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è" value="CliffordKey123">
        
        <div class="flex-row">
            <button onclick="processEncryption()">üîÑ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
            <button onclick="processDecryption()">‚Ü©Ô∏è –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
            <button onclick="clearAll()">‚ùå –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        <div class="hint">–î–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤—Å—Ç–∞–≤—å—Ç–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤—ã—à–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å"</div>
    </div>

    <div class="container">
        <h2>üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã</h2>
        <div class="debug">
            <strong>–ê–ª–≥–µ–±—Ä–∞ –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</strong><br>
            ‚Ä¢ –ú–µ—Ç–æ–¥: –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞<br>
            ‚Ä¢ –û—Å–Ω–æ–≤–∞: –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞<br>
            ‚Ä¢ –û–¥–Ω–æ–ø—Ä–æ—Ö–æ–¥–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Ä–∞—É–Ω–¥–æ–≤)
        </div>
    </div>

    <div class="container">
        <h2>üßÆ –ü—Ä–æ—Ü–µ—Å—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="output" id="processOutput">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>

    <div class="container">
        <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
        <div class="output" id="resultOutput">‚Äî</div>
        <div id="validationOutput" class="status">‚Äî</div>
    </div>

    <script>
        class TextCliffordCipher {
            constructor() {
                this.debugLog = [];
            }

            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                this.debugLog.push({message: `[${timestamp}] ${message}`, type, time: Date.now()});
                return message;
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∏—Å–ª–æ–≤–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä–æ–∫–∏
            generateKey(keyString) {
                let key = 0;
                for (let i = 0; i < keyString.length; i++) {
                    key = (key + keyString.charCodeAt(i) * (i + 1)) % 65536;
                }
                this.log(`üîë –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —á–∏—Å–ª–æ–≤–æ–π –∫–ª—é—á: ${key} –∏–∑ —Å—Ç—Ä–æ–∫–∏: "${keyString}"`);
                return key;
            }

            // –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞
            createCliffordVector(key, length) {
                const vector = [];
                for (let i = 0; i < length; i++) {
                    // –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–∞
                    const value = Math.sin(key * (i + 1)) * 10000;
                    vector.push(Math.abs(Math.floor(value) % 65536));
                }
                return vector;
            }

            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞ –∫ —Ç–µ–∫—Å—Ç—É
            applyCliffordTransformation(text, vector) {
                let result = '';
                
                for (let i = 0; i < text.length; i++) {
                    const charCode = text.charCodeAt(i);
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞
                    const transformedCode = (charCode + vector[i % vector.length]) % 65536;
                    
                    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                    result += String.fromCharCode(transformedCode);
                }
                
                return result;
            }

            // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
            encryptText(text, keyString) {
                this.debugLog = [];
                this.log('üöÄ –ù–∞—á–∞–ª–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞', 'success');
                
                const key = this.generateKey(keyString);
                const vector = this.createCliffordVector(key, text.length);
                
                this.log(`üìä –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: "${text}" (${text.length} —Å–∏–º–≤–æ–ª–æ–≤)`);
                this.log(`üìê –í–µ–∫—Ç–æ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: [${vector.slice(0, 5)}${vector.length > 5 ? '...' : ''}]`);

                const transformedText = this.applyCliffordTransformation(text, vector);

                this.log(`üì¶ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: "${transformedText}"`);
                this.log('üéØ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ', 'success');
                
                return {
                    ciphertext: transformedText,
                    debug: this.debugLog,
                    original: text,
                    key: key
                };
            }

            // –û–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞
            reverseCliffordTransformation(text, vector) {
                let result = '';
                
                for (let i = 0; i < text.length; i++) {
                    const charCode = text.charCodeAt(i);
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ö–ª–∏—Ñ—Ñ–æ—Ä–¥–∞
                    const reversedCode = (charCode - vector[i % vector.length] + 65536) % 65536;
                    
                    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                    result += String.fromCharCode(reversedCode);
                }
                
                return result;
            }

            // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
            decryptText(ciphertext, keyString) {
                this.debugLog = [];
                this.log('üîì –ù–∞—á–∞–ª–æ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞', 'success');
                
                const key = this.generateKey(keyString);
                const vector = this.createCliffordVector(key, ciphertext.length);
                
                this.log(`üìä –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: "${ciphertext}" (${ciphertext.length} —Å–∏–º–≤–æ–ª–æ–≤)`);
                this.log(`üìê –í–µ–∫—Ç–æ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: [${vector.slice(0, 5)}${vector.length > 5 ? '...' : ''}]`);

                const decryptedText = this.reverseCliffordTransformation(ciphertext, vector);

                this.log(`üìÑ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: "${decryptedText}"`);
                this.log('üéØ –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ', 'success');
                
                return {
                    plaintext: decryptedText,
                    debug: this.debugLog
                };
            }
        }

        const cipher = new TextCliffordCipher();
        let lastResult = null;

        function processEncryption() {
            const inputText = document.getElementById('inputText').value;
            const keyString = document.getElementById('encryptionKey').value;
            
            if (!inputText) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            if (!keyString) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }

            const result = cipher.encryptText(inputText, keyString);
            lastResult = result;

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
            const processOutput = result.debug.map(item => 
                `<span class="${item.type}">${item.message}</span>`
            ).join('\n');
            
            document.getElementById('processOutput').innerHTML = processOutput;
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('resultOutput').innerHTML = 
                `üì¶ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: "${result.ciphertext}"\n\n` +
                `üìÑ –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: "${result.original}"\n` +
                `üî¢ –î–ª–∏–Ω–∞: ${result.ciphertext.length} —Å–∏–º–≤–æ–ª–æ–≤\n` +
                `üîë –ß–∏—Å–ª–æ–≤–æ–π –∫–ª—é—á: ${result.key}`;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
            document.getElementById('validationOutput').textContent = '‚úì –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ';
            document.getElementById('validationOutput').className = 'status valid';
        }

        function processDecryption() {
            const inputText = document.getElementById('inputText').value;
            const keyString = document.getElementById('encryptionKey').value;
            
            if (!inputText) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            if (!keyString) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }

            const result = cipher.decryptText(inputText, keyString);
            
            document.getElementById('processOutput').innerHTML = 
                result.debug.map(item => `<span class="${item.type}">${item.message}</span>`).join('\n');
            
            document.getElementById('resultOutput').innerHTML = 
                `üìÑ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: "${result.plaintext}"`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
            document.getElementById('validationOutput').textContent = '‚úì –¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω';
            document.getElementById('validationOutput').className = 'status valid';
        }

        function clearAll() {
            document.getElementById('inputText').value = '';
            document.getElementById('encryptionKey').value = 'CliffordKey123';
            document.getElementById('processOutput').innerHTML = '–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...';
            document.getElementById('resultOutput').innerHTML = '‚Äî';
            document.getElementById('validationOutput').textContent = '‚Äî';
            document.getElementById('validationOutput').className = 'status';
            lastResult = null;
        }
    </script>
</body>
</html>
